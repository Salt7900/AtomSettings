{"version":1,"windowDimensions":{"x":4,"y":23,"width":1276,"height":777,"maximized":true},"grammars":{"grammarOverridesByPath":{}},"project":{"deserializer":"Project","paths":["/Users/benfallon/Desktop/DBC/breadcrumbs-db"],"buffers":[{"text":"require 'stringio'\nrequire 'base64'\n\nclass Breadcrumb < ActiveRecord::Base\n  belongs_to :creator, class_name: \"User\"\n  belongs_to :receiver, class_name: \"User\"\n\n  has_attached_file :photo, :storage => :s3, :bucket => 'breadcrumbs-assets'\n  validates_attachment_content_type :photo, content_type: /\\Aimage\\/.*\\Z/\n\n  attr_accessor :image_data\n\n  before_save :decode_image_data, :set_url_for_aws\n\n  def decode_image_data\n    if self.image_data.present?\n      data = StringIO.new(Base64.decode64(self.image_data))\n      data.class.class_eval {attr_accessor :original_filename, :content_type}\n      data.original_filename = self.id.to_s + \".png\"\n      data.content_type = \"image/png\"\n\n      self.photo = data\n    end\n  end\n\n  def set_url_for_aws\n    self.photo_aws_url = self.photo.url\n  end\n\n  def set_creator_email\n    self.creator_email = self.creator.email\n  end\nend\n","markerStore":{"nextMarkerId":2,"markersById":{"0":{"range":{"start":{"row":16,"column":4},"end":{"row":16,"column":4}},"properties":{"type":"selection","editorId":4,"goalScreenRange":null,"autoscroll":false},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}},"version":2},"history":{"version":3,"nextCheckpointId":2,"undoStack":[],"redoStack":[{"type":"group-end","snapshot":{"0":{"range":[[15,30],[15,30]],"properties":{"type":"selection","editorId":4,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}},{"type":"change","content":{"oldRange":[[15,29],[15,29]],"newRange":[[15,29],[15,30]],"oldText":"","newText":"f"}},{"type":"group-start","snapshot":{"0":{"range":[[15,29],[15,29]],"properties":{"type":"selection","editorId":4,"goalScreenRange":null},"reversed":false,"tailed":false,"valid":true,"invalidate":"never","maintainHistory":true}}}]},"encoding":"utf8","filePath":"/Users/benfallon/Desktop/DBC/breadcrumbs-db/app/models/breadcrumb.rb","digestWhenLastPersisted":"d292aaea6c5456d9c1e440d1c83fff73b438e5e6","preferredLineEnding":null,"deserializer":"TextBuffer","version":2}]},"workspace":{"deserializer":"Workspace","paneContainer":{"deserializer":"PaneContainer","version":1,"root":{"deserializer":"Pane","id":3,"items":[{"deserializer":"TextEditor","id":4,"softTabs":true,"scrollRow":4,"displayBuffer":{"deserializer":"DisplayBuffer","id":5,"softWrapped":true,"tokenizedBuffer":{"deserializer":"TokenizedBuffer","bufferPath":"/Users/benfallon/Desktop/DBC/breadcrumbs-db/app/models/breadcrumb.rb","largeFileMode":false},"largeFileMode":false}}],"activeItemURI":"/Users/benfallon/Desktop/DBC/breadcrumbs-db/app/models/breadcrumb.rb","focused":true,"flexScale":1},"activePaneId":3},"packagesWithActiveGrammars":["language-ruby","language-hyperlink","language-todo"],"destroyedItemURIs":[]},"packageStates":{"pigments":{"project":{"deserializer":"ColorProject","timestamp":"2015-11-26T04:27:14.221Z","version":"1.0.1","markersVersion":"1.0.5","globalSourceNames":["**/*.styl","**/*.stylus","**/*.less","**/*.sass","**/*.scss"],"globalIgnoredNames":["vendor/*","node_modules/*","spec/*","test/*"],"buffers":{"4":{"id":4,"path":"/Users/benfallon/Desktop/DBC/breadcrumbs-db/app/models/breadcrumb.rb","colorMarkers":[]}},"paths":["/Users/benfallon/Desktop/DBC/breadcrumbs-db/app/assets/stylesheets/pseudocrumbs.scss"],"variables":{"deserializer":"VariablesCollection","content":[]}}},"fuzzy-finder":{"/Users/benfallon/Desktop/DBC/breadcrumbs-db/app/models/breadcrumb.rb":1448468066379},"metrics":{"sessionLength":43981340},"tabs":[{}],"tree-view":{"directoryExpansionStates":{"/Users/benfallon/Desktop/DBC/breadcrumbs-db":{"isExpanded":true,"entries":{".git":{"isExpanded":false,"entries":{}},"app":{"isExpanded":true,"entries":{"assets":{"isExpanded":false,"entries":{}},"controllers":{"isExpanded":false,"entries":{}},"helpers":{"isExpanded":false,"entries":{}},"mailers":{"isExpanded":false,"entries":{}},"models":{"isExpanded":true,"entries":{"concerns":{"isExpanded":false,"entries":{}}}},"views":{"isExpanded":false,"entries":{}}}},"bin":{"isExpanded":false,"entries":{}},"breadCrumbs-photos":{"isExpanded":false,"entries":{}},"config":{"isExpanded":false,"entries":{}},"db":{"isExpanded":false,"entries":{}},"lib":{"isExpanded":false,"entries":{}},"log":{"isExpanded":false,"entries":{}},"public":{"isExpanded":false,"entries":{}},"spec":{"isExpanded":false,"entries":{}},"test":{"isExpanded":false,"entries":{}},"vendor":{"isExpanded":false,"entries":{}}}}},"selectedPath":"/Users/benfallon/Desktop/DBC/breadcrumbs-db/app/models/breadcrumb.rb","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}},"fullScreen":false}